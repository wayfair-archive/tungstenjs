<!doctype html><html lang="en"><head><meta charset="UTF-8"/><title>Tungsten.js</title><link rel="stylesheet" href="css/all.1474436653000.css"/></head><body><div id="layout"><div id="menu"><div class="pure-menu"><a class="pure-menu-heading" href="index.html" id="menu-toggle">Tungsten.js<span class="menu_toggle"></span></a><ul class="pure-menu-list top-menu"><li><a href="index.html" class="pure-menu-link pure-menu-section">Docs</a><ul class="pure-menu-list"><li class="pure-menu-item"><a href="views.html" class="pure-menu-link">Views</a></li><li class="pure-menu-item"><a href="templates.html" class="pure-menu-link">Templates</a></li><li class="pure-menu-item"><a href="models.html" class="pure-menu-link">Models</a></li><li class="pure-menu-item"><a href="components.html" class="pure-menu-link">Components</a></li><li class="pure-menu-item"><a href="debugger.html" class="pure-menu-link">Debugger</a></li><li class="pure-menu-item"><a href="patterns.html" class="pure-menu-link">Patterns</a></li></ul></li><li><a href="tutorials.html" class="pure-menu-link pure-menu-section">Tutorials</a><ul class="pure-menu-list"><li class="pure-menu-item"><a href="tutorials.html#Hello%20World" class="pure-menu-link js-tutorial-select">Hello World</a></li><li class="pure-menu-item"><a href="tutorials.html#Derived%20Props" class="pure-menu-link js-tutorial-select">Derived Props</a></li><li class="pure-menu-item"><a href="tutorials.html#Debugging" class="pure-menu-link js-tutorial-select">Debugging</a></li><li class="pure-menu-item"><a href="tutorials.html#TodoMVC" class="pure-menu-link js-tutorial-select">TodoMVC</a></li><li class="pure-menu-item"><a href="tutorials.html#Views%20&amp;%20Context" class="pure-menu-link js-tutorial-select">Views &amp; Context</a></li><li class="pure-menu-item"><a href="tutorials.html#Events" class="pure-menu-link js-tutorial-select">Events</a></li><li class="pure-menu-item"><a href="tutorials.html#Components" class="pure-menu-link js-tutorial-select">Components</a></li></ul></li><li><a href="sandbox.html" class="pure-menu-link pure-menu-section">Sandbox</a></li><li><a href="examples.html" class="pure-menu-link pure-menu-section">Examples</a><ul class="pure-menu-list"><li class="pure-menu-item"><a href="examples__dbmonster-component.html" class="pure-menu-link js-tutorial-select">DBMonster</a></li><li class="pure-menu-item"><a href="examples__drag-and-drop.html" class="pure-menu-link js-tutorial-select">Drag &amp; Drop</a></li><li class="pure-menu-item"><a href="examples__svg.html" class="pure-menu-link js-tutorial-select">SVG</a></li><li class="pure-menu-item"><a href="examples__web-components.html" class="pure-menu-link js-tutorial-select">Web Components</a></li><li class="pure-menu-item"><a href="examples__todomvc.html" class="pure-menu-link js-tutorial-select">TodoMVC</a></li></ul></li></ul><ul class="pure-menu-list bottom-menu"><li class="pure-menu-item"><a target="_blank" href="https://www.npmjs.com/package/tungstenjs" class="pure-menu-link">npm</a></li><li class="pure-menu-item"><a target="_blank" href="https://github.com/wayfair/tungstenjs" class="pure-menu-link">GitHub</a></li><li class="pure-menu-item"><a target="_blank" href="http://engineering.wayfair.com/" class="pure-menu-link">Wayfair<br>Engineering</a></li></ul></div></div><div class="main" id="appwrapper"><div class="content">
          <h1 id="models">Models</h1>
<p>Models in Tungsten.js use the standard Backbone model API, along with support for related (nested) models and collections.</p>
<h2 id="app-data">App Data</h2>
<p>Each Tungsten.js app expects a single data store where the current state of the application is kept.  This data store takes the form of an app model instance.</p>
<p>The root app model, like a standard Backbone model, contains the model&#39;s state in a hash of attributes.  This is usually passed from the server, via either a <a href="http://backbonejs.org/#FAQ-bootstrap">boostrapped data object</a> or an <a href="http://backbonejs.org/#Model-fetch">XHR request</a>.</p>
<p>In addition to standard Backbone behavior, we also provide a nested model functionality based on Bret Little&#39;s <a href="https://github.com/blittle/backbone-nested-models">backbone-nested-models</a>.  To define a particular attribute as a reference to a model or collection, set <code>relations</code> hash on the model constructor with the key being the attribute name and the value being the nested model/collection constructor:</p>
<pre><code class="hljs">BaseModel.extend({
  <span class="hljs-comment">// [...]</span>
  relations: {
    <span class="hljs-attr">items</span>: BaseCollection,
    <span class="hljs-attr">foo</span>: BaseModel
  }
});</code></pre><h2 id="events">Events</h2>
<p>Events triggered in Tungsten (non-DOM events) &quot;bubble up&quot; through models and collections. Unless stopped, the event will proceed from whatever given nested model triggered it, all the way up to the base model. (This does not include when the event is from a component- there is a specific process for listening to events on a child component. See &#39;<a href="http://wayfair.github.io/tungstenjs/components.html">Components</a>&#39; for more information.) When an event has finished bubbling, a re-render is triggered.</p>
<p>This bubbling allows for an &quot;events up, methods down&quot; pattern of design. Events can bubble up from child models (containing bespoke data as necessary), and parents can listen for those events and, in response, call the appropriate methods on their children. This is how communication between parents and children in Tungsten should occur. Remember: <strong>Events Up, Methods Down!</strong></p>
<h2 id="special-properties">Special Properties</h2>
<p>Included with the Backbone adaptor are special model property types which were inspired by <a href="http://ampersandjs.com/docs#ampersand-state">ampersand-state</a>.</p>
<p><strong>Derived Properties</strong>: Derived properties are properties which are computed based on the value of another property.  They can be added with the <code>derived</code> hash in Backbone models, with the key being the property name and the value being an options object.  The object should include an array at key <code>deps</code> of properties that the derived property relies on, as well as a function at key <code>fn</code> which should return the derived value.  Derived properties will not be serialized with <code>toJSON</code>.</p>
<pre><code class="hljs">BaseModel.extend({
  <span class="hljs-comment">// [...]</span>
  derived: {
      <span class="hljs-attr">incompletedItems</span>: {
        <span class="hljs-attr">deps</span>: [<span class="hljs-string">'todoItems'</span>],
        <span class="hljs-attr">fn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.get(<span class="hljs-string">'todoItems'</span>).filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">item</span>) </span>{
            <span class="hljs-keyword">return</span> !item.get(<span class="hljs-string">'completed'</span>);
          });
        }
      }
  }
});</code></pre><p><strong>Computed Properties</strong>: Properties which are computed, but not reliant on any other properties, can be added simply by adding a method with the desired property name on the model.  These will be read by templates during rendering, though they will not be accessible via <code>model.get()</code> or serialized with <code>toJSON</code>.  <em>Computed properties are now deprecated and will be removed in a future version of Tungsten.js.  Use derived properties instead.</em></p>
<p><strong>Session Properties</strong>: Transient properties that shouldn&#39;t be serialized when saving the model can be excluded from <code>toJSON</code> by adding a <code>session</code> property to the model:</p>
<pre><code class="hljs">BaseModel.extend({
  <span class="hljs-comment">// [...]</span>
  session: [<span class="hljs-string">'user'</span>, <span class="hljs-string">'is_logged_in'</span>]
});</code></pre>
        </div></div></div><script src="js/all.1470083030000.js"></script></body></html>
